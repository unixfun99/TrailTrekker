# TrailTrekker Apache Virtual Host Configuration
# Location: /etc/httpd/conf.d/trailtrekker.conf

# HTTP to HTTPS Redirect (if using SSL)
<VirtualHost *:80>
    ServerName your-domain.com
    ServerAlias www.your-domain.com
    
    # Uncomment to redirect HTTP to HTTPS
    # Redirect permanent / https://your-domain.com/

    # OR keep HTTP enabled (comment out redirect above)
    ServerAdmin admin@your-domain.com

    # Logging
    ErrorLog /var/log/httpd/trailtrekker_error.log
    CustomLog /var/log/httpd/trailtrekker_access.log combined

    # Preserve the original Host header
    ProxyPreserveHost On
    
    # Forward all requests to Node.js app on port 5000
    ProxyPass / http://127.0.0.1:5000/
    ProxyPassReverse / http://127.0.0.1:5000/
    
    # Timeout settings for long-running requests
    ProxyTimeout 300
</VirtualHost>

# HTTPS Virtual Host (uncomment and configure if using SSL)
# <VirtualHost *:443>
#     ServerName your-domain.com
#     ServerAlias www.your-domain.com
#     ServerAdmin admin@your-domain.com
#
#     # SSL Configuration
#     SSLEngine on
#     SSLCertificateFile /etc/pki/tls/certs/your-domain.crt
#     SSLCertificateKeyFile /etc/pki/tls/private/your-domain.key
#     # Uncomment if you have a certificate chain file
#     # SSLCertificateChainFile /etc/pki/tls/certs/your-domain-chain.crt
#
#     # Modern SSL Configuration
#     SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1
#     SSLCipherSuite HIGH:!aNULL:!MD5
#     SSLHonorCipherOrder on
#
#     # Logging
#     ErrorLog /var/log/httpd/trailtrekker_ssl_error.log
#     CustomLog /var/log/httpd/trailtrekker_ssl_access.log combined
#
#     # Proxy Configuration
#     ProxyPreserveHost On
#     ProxyPass / http://127.0.0.1:5000/
#     ProxyPassReverse / http://127.0.0.1:5000/
#     ProxyTimeout 300
#
#     # WebSocket Support (for real-time features)
#     RewriteEngine On
#     RewriteCond %{HTTP:Upgrade} =websocket [NC]
#     RewriteRule /(.*)           ws://127.0.0.1:5000/$1 [P,L]
#     RewriteCond %{HTTP:Upgrade} !=websocket [NC]
#     RewriteRule /(.*)           http://127.0.0.1:5000/$1 [P,L]
# </VirtualHost>
